<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Clouds, Virtualization and something more..."><meta name=Author content="Volodymyr Vrublevskyy"><meta name=keywords content="IT Talks"><link rel=stylesheet href=https://vovando.dev/css/syntax.css><link rel=stylesheet href=https://vovando.dev/css/style.css><script src=https://kit.fontawesome.com/1b7478c139.js crossorigin=anonymous></script><title>IT Talks</title></head><body><aside id=sidenav><header><a href=https://vovando.dev/><img src=https://vovando.dev/avatar.png alt=avatar></a>
<a id=branding href=https://vovando.dev/>IT Talks</a></header><nav><a href=/><i class="fas fa-home fa-sm"></i><span>whoami</span></a>
<a href=/posts><i class="fas fa-keyboard fa-ms"></i><span>blog</span></a>
<a href=/tags><i class="fas fa-tags fa-ms"></i><span>tags</span></a>
<a href=https://github.com/vovandodev target=_blank><i class="fab fa-github fa-ms"></i><span>github</span></a>
<a href=/index.xml><i class="fas fa-rss fa-ms"></i><span>RSS</span></a>
<a href=/contact><i class="far fa-envelope"></i><span>contact</span></a></nav></aside><main id=main><a href=javascript:void(0) id=closebtn onclick=navToggle()><i class="fas fa-bars fa-lg"></i></a><div class=content><h1 id=title>Monitor Logs in Real-Time with “Log.io” on CentOS 6/7</h1><nav id=TableOfContents><ul><li><ul><li></li></ul></li><li><a href=#step-2-install-nodejs-and-npm-packages><strong>Step 2: Install Node.js and NPM Packages</strong></a></li><li><a href=#step-3-install-and-configurenbspa-data-mce-hrefhttplogio-hrefhttplogiologioanbspapplication><strong>Step 3: Install and Configure Log.io Application</strong></a></li><li><a href=#step-4-add-firewall-rule-and-startnbspa-data-mce-hrefhttplogio-hrefhttplogiologioanbspapplication><strong>Step 4: Add Firewall Rule and Start Log.io Application</strong></a></li><li><a href=#step-5-startnbspa-data-mce-hrefhttplogio-hrefhttplogiologioanbspapplication-and-enter-web-interface><strong>Step 5: Start Log.io Application and enter Web Interface</strong></a></li></ul><ul><li><a href=#step-6-createnbspa-data-mce-hrefhttplogio-hrefhttplogiologioanbspmanage-script><strong>Step 6: Create Log.io Manage Script</strong></a></li></ul></nav><p>Log.io is a small simple but effective application build on top of Node.js and Socket.io, which allows to monitor Linux servers log files in real time through web interface screen widgets.</p><p>How to install and configure log.io:</p><p>Step 1: Add Epel Repositories</p><ol><li>CentOS Epel repositories provides the binary packages for Node.js and NPM – Node Packaged Modules. Install Epel repositories by issuing the following command.</li></ol><p><strong>On RHEL/CentOS 6</strong></p><p>&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash; On RHEL/CentOS 6.x - 64 Bit &mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;</p><h1 id=yum-install-httpfedoramirrorstelekomropubepel6x86_64epel-release-6-8noarchrpmpre>yum install <a href=http://fedora.mirrors.telekom.ro/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm>http://fedora.mirrors.telekom.ro/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm</a></h1><pre><code>&lt;/td&gt;
</code></pre><p> </p><h5 id=on-rhelcentos-6>On RHEL/CentOS 6</h5><p> </p><h2 id=step-2-install-nodejs-and-npm-packages><strong>Step 2: Install Node.js and NPM Packages</strong></h2><ol start=2><li>Node.js is a Javascript server-side programming platform which allows you to create network applications with backend functionality. NPM (Node Package Manager) is practically the package manager for Node.js. So, on the next step go ahead and install Node.js and NMP binaries on your system through YUM package manager by issuing the following commands.</li></ol><p> </p><h2 id=step-3-install-and-configurenbspa-data-mce-hrefhttplogio-hrefhttplogiologioanbspapplication><strong>Step 3: Install and Configure Log.io Application</strong></h2><p>3. Log.io application must be installed on your system through NPM by specifying a valid local system user, through which the installation must take place. While you can use any valid system user to install Log.io, I personally recommend installing the application through root user or other system user with root privileges.</p><p>The reason for using this approach is that Log.io must have access to read locally log files and a user with non-privileges root privileges usually can’t access and read some important log files.</p><p>So, login with root account and install Log.io application through root account by issuing the following command (if you use other user replace root account with your system user accordingly).</p><p> </p><ol start=4><li>Now it’s time to configure Log.io to monitor local log files in real time. Let’s get an inside on how Log.io works.</li></ol><p> </p><p>First open harvester.conf file for editing, which by default only monitors Apache log files, and replace nodeNamestatement to match your hostname and define the logStreams statements with what internal log files you want to monitor (in this case I’m monitoring multiple log files such as audit, messages and secure logs). Use the below file excerpt as a guide.</p><p>Also if you don’t need harvester output to be sent to a remote Log.io server change the line host on serverstatement to only send its output locally by modifying 0.0.0.0 address with loopback address (127.0.0.1).</p><p> </p><p>5. For security reasons, if you are not expecting remote harvesters output to your local Log.io server openlog_server.conf file and replace 0.0.0.0 address with loopback address (127.0.0.1).</p><p> </p><ol start=6><li>Other security features such as credentials login, HTTPS or restriction based on IPs to Log.io web server can be applied on web server-side. For this tutorial I will only use as a security measure just credential login.</li></ol><p>So, open web_server.conf file, uncomment the entire auth statement by deleting all slashes and asterisks and replace user and pass directives accordingly as suggested on the bottom screenshot.</p><p>// Enable HTTP Basic Authentication
auth: {
user: &ldquo;admin&rdquo;,
pass: &ldquo;admin&rdquo;
},</p><p>/*
// Enable HTTPS/SSL
ssl: {
key: '/path/to/privatekey.pem',
cert: '/path/to/certificate.pem'
},
*/
/*
// Restrict access to websocket (socket.io)
// Uses socket.io 'origins' syntax
restrictSocket: '*:*',
*/
/*
// Restrict access to http server (express)
restrictHTTP: [
&ldquo;192.168.29.39&rdquo;,
&ldquo;10.0.*&rdquo;
]
*/
}</p><h2 id=step-4-add-firewall-rule-and-startnbspa-data-mce-hrefhttplogio-hrefhttplogiologioanbspapplication><strong>Step 4: Add Firewall Rule and Start Log.io Application</strong></h2><ol start=7><li>In order to gain web access to Log.io server add a rule on RHEL/CentOS 6/7 Firewall to open TCP 28778 port.</li></ol><h2 id=step-5-startnbspa-data-mce-hrefhttplogio-hrefhttplogiologioanbspapplication-and-enter-web-interface><strong>Step 5: Start Log.io Application and enter Web Interface</strong></h2><ol start=8><li>In order to start Log.io log monitoring application assure that your current working directory is root’s home .log.io and use the following commands in the following order to start application.</li></ol><p>&mdash;&mdash;&mdash;&mdash; Start log harvester in background &mdash;&mdash;&mdash;&mdash;</p><h1 id=logio-harvester--pre>log.io-harvester &</h1><pre><code>&lt;/td&gt;
</code></pre><ol start=9><li>After the server has been started open a browser, enter your servers IP followed by 28778 port number using HTTP protocol on URL address and a prompt demanding your login credentials should appear.</li></ol><p>Enter your user and password configured on step 6 to proceed further and Log.io application should now be visible on your browser presenting monitored log files in real time.</p><p>http://X.X.X.X:28778</p><p>On Web interface add new screens and organize your streams or nodes accordingly.</p><p>10. To stop Log.io application run the following command.</p><p> </p><h2 id=step-6-createnbspa-data-mce-hrefhttplogio-hrefhttplogiologioanbspmanage-script><strong>Step 6: Create Log.io Manage Script</strong></h2><ol start=11><li>In order to use a command that manages Log.io application with three switches ( start, stop and status) create the following script named log.io on <strong>/<strong>usr</strong>/local/bin</strong> executable directory and append execution permissions to this script.</li></ol><p></p><p> </p><p> </p><p><strong>[root@app .log.io]# log.io status</strong><br><strong>Status io-log process…</strong><br><strong>tcp 0 0 app.com,:28777 *:* LISTEN 2133/node</strong><br><em><em>tcp 0 0 *:28778 *:</em> LISTEN 2133/node</em>*<br>**[root@qa-app .log.io]#**</p><div class=nav-next-prev><div class=nav-prev><a href=https://vovando.dev/2016/04/26/how-to-install-python-2-7-6-on-centos-6-3/><i class="fas fa-chevron-left"></i></a></div><a class=nav-top href=#>top</i></a><div class=nav-next><a href=https://vovando.dev/2016/05/12/read-only-user-in-postgresql/><i class="fas fa-chevron-right"></i></a></div></div></div><footer><div class=footer-content><div class=contact-info><div class=footer-mail><i class="far fa-envelope"></i><a href=mailto:hello@vovando.dev>hello@vovando.dev</a></div><div class=footer-phone><i class="fas fa-phone"></i>7777</div></div><p class="copyright meta">Copyright © 2013–2020, all rights reserved.</p></div></footer></main></body><script src=https://vovando.dev/js/navbutton.js></script></html>