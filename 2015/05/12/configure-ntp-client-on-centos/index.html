<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Clouds, Virtualization and something more..."><meta name=Author content="Volodymyr Vrublevskyy"><meta name=keywords content="IT Talks"><link rel=stylesheet href=https://vovando.dev/css/syntax.css><link rel=stylesheet href=https://vovando.dev/css/style.css><script src=https://kit.fontawesome.com/1b7478c139.js crossorigin=anonymous></script><title>IT Talks</title></head><body><aside id=sidenav><header><a href=https://vovando.dev/><img src=https://vovando.dev/avatar.png alt=avatar></a>
<a id=branding href=https://vovando.dev/>IT Talks</a></header><nav><a href=/><i class="fas fa-home fa-sm"></i><span>whoami</span></a>
<a href=/posts><i class="fas fa-keyboard fa-ms"></i><span>blog</span></a>
<a href=/tags><i class="fas fa-tags fa-ms"></i><span>tags</span></a>
<a href=https://github.com/vovandodev target=_blank><i class="fab fa-github fa-ms"></i><span>github</span></a>
<a href=/index.xml><i class="fas fa-rss fa-ms"></i><span>RSS</span></a>
<a href=/contact><i class="far fa-envelope"></i><span>contact</span></a></nav></aside><main id=main><a href=javascript:void(0) id=closebtn onclick=navToggle()><i class="fas fa-bars fa-lg"></i></a><div class=content><h1 id=title>Configure NTP Client on CentOS</h1><nav id=TableOfContents><ul><li><ul><li></li></ul></li></ul></nav><p>Today we need to install ntp server. Lets do it on Centos 6.6. The same process will be for Centos 7.</p><p>1. Install NTP Server</p><p>First, install NTP package on your server using the appropriate repository: </p><p><strong>#yum install ntp</strong></p><p></p><p> </p><p>2. Setup Restrict values in ntp.conf</p><p>Modify the /etc/ntp.conf file to make sure it has the following two restrict lines.</p><p></p><p> </p><p>The first restrict line allows other clients to query your time server. This restrict line has the following parameters</p><ul><li><strong>noquery</strong> prevents dumping status data from ntpd.</li><li><strong>notrap</strong> prevents control message trap service.</li><li><strong>nomodify</strong> prevents all ntpq queries that attempts to modify the server.</li><li><strong>nopeer</strong> prevents all packets that attempts to establish a peer association.</li><li><strong>Kod – Kiss-o-death packet</strong> is to be sent to reduce unwanted queries</li></ul><p>The value -6 in the second line allows forces the DNS resolution to the IPV6 address resolution. For more information on the access parameters list, Please refer to documentation on “man ntp_acc”</p><p> </p><h5 id=font-size5font-stylefont-weight-bold3-allow-only-specific-clientsfontfont>3. Allow Only Specific Clients</h5><p>To only allow machines on your own network to synchronize with your NTP server, add the following restrict line to your /etc/ntp.conf file:</p><p></p><p> </p><p>If the localhost needs to have the full access to query or modify, add the following line to /etc/ntp.conf</p><p><strong>#restrict 127.0.0.1</strong></p><p> </p><h5 id=font-size5font-stylefont-weight-bold4-setup-ntp-log-parametersfontfont>4. Setup NTP Log Parameters</h5><p>Specify the drift file and the log file location in your ntp.conf file</p><p></p><p> </p><p><strong>driftfile</strong> is used to log how far your clock is from what it should be, and slowly ntp should lower this value as time progress.</p><div class=nav-next-prev><div class=nav-prev><a href=https://vovando.dev/2015/05/10/upgrading-to-vmware-virtual-san-6-0/><i class="fas fa-chevron-left"></i></a></div><a class=nav-top href=#>top</i></a><div class=nav-next><a href=https://vovando.dev/2015/05/21/convert-ppk-to-id_rsa-in-centos/><i class="fas fa-chevron-right"></i></a></div></div></div><footer><div class=footer-content><div class=contact-info><div class=footer-mail><i class="far fa-envelope"></i><a href=mailto:hello@vovando.dev>hello@vovando.dev</a></div><div class=footer-phone><i class="fas fa-phone"></i>7777</div></div><p class="copyright meta">Copyright © 2013–2020, all rights reserved.</p></div></footer></main></body><script src=https://vovando.dev/js/navbutton.js></script></html>