<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Clouds, Virtualization and something more..."><meta name=Author content="Volodymyr Vrublevskyy"><meta name=keywords content="IT Talks"><link rel=stylesheet href=https://vovando.dev/css/syntax.css><link rel=stylesheet href=https://vovando.dev/css/style.css><script src=https://kit.fontawesome.com/1b7478c139.js crossorigin=anonymous></script><title>IT Talks</title></head><body><aside id=sidenav><header><a href=https://vovando.dev/><img src=https://vovando.dev/avatar.png alt=avatar></a>
<a id=branding href=https://vovando.dev/>IT Talks</a></header><nav><a href=/><i class="fas fa-home fa-sm"></i><span>whoami</span></a>
<a href=/posts><i class="fas fa-keyboard fa-ms"></i><span>blog</span></a>
<a href=/tags><i class="fas fa-tags fa-ms"></i><span>tags</span></a>
<a href=https://github.com/vovandodev target=_blank><i class="fab fa-github fa-ms"></i><span>github</span></a>
<a href=/index.xml><i class="fas fa-rss fa-ms"></i><span>RSS</span></a>
<a href=/contact><i class="far fa-envelope"></i><span>contact</span></a></nav></aside><main id=main><a href=javascript:void(0) id=closebtn onclick=navToggle()><i class="fas fa-bars fa-lg"></i></a><div class=content><h1 id=title>Knife-vsphere installation errors</h1><nav id=TableOfContents></nav><p>Today I tried to install knife vsphere support for Chef (You can make it by this command $<strong>gem install knife-vsphere</strong> ) on Ubuntu and received several errors.</p><p>First of them was:</p><p><em>Building native extensions.  This could take a while…<br>ERROR:  Error installing knife-vsphere:<br>        ERROR: Failed to build gem native extension.</em></p><p><em>    /usr/bin/ruby2.1 extconf.rb<br>mkmf.rb can&rsquo;t find header files for ruby at /usr/lib/ruby/include/ruby.h</em></p><p><em>extconf failed, exit code 1</em></p><p><em>Gem files will remain installed in /var/lib/gems/2.1.0/gems/libyajl2-1.2.0 for inspection.<br>Results logged to /var/lib/gems/2.1.0/extensions/x86_64-linux/2.1.0/libyajl2-1.2.0/gem_make.out<br>vovando@dcl-ubuntu-test:~$ cat /var/lib/gems/2.1.0/extensions/x86_64-linux/2.1.0/libyajl2-1.2.0/gem_make.out<br>/usr/bin/ruby2.1 extconf.rb<br>mkmf.rb can&rsquo;t find header files for ruby at /usr/lib/ruby/include/ruby.h</em></p><p> </p><p></p><p> </p><p>Solution:  $ <strong>sudo apt-get install ruby-dev</strong></p><p> </p><p>The second try to install:</p><p><em>Building native extensions.  This could take a while…<br>ERROR:  Error installing knife-vsphere:<br>        ERROR: Failed to build gem native extension.</em></p><p><em>    /usr/bin/ruby2.1 extconf.rb<br>checking if the C compiler accepts … yes<br><strong>Building nokogiri using packaged libraries.<br>checking for gzdopen() in -lz… no<br>zlib is missing; necessary for building libxml2</strong><br>*\<em>* extconf.rb failed **</em><br>Could not create Makefile due to some reason, probably lack of necessary<br>libraries and/or headers.  Check the mkmf.log file for more details.  You may<br>need configuration options.</em></p><p></p><p> </p><p>Solution:</p><p>$ <strong>sudo apt-get install zlib1g-dev</strong></p><p></p><p> </p><p>After that everything was fine:</p><p> </p><p>vovando@dcl-ubuntu-test:~$ <strong>sudo gem install knife-vsphere</strong><br>Building native extensions.  This could take a while…<br>Successfully installed nokogiri-1.6.6.2<br>Fetching: rbvmomi-1.8.2.gem (100%)<br>Successfully installed rbvmomi-1.8.2<br>Fetching: gyoku-1.3.1.gem (100%)<br>Successfully installed gyoku-1.3.1<br>Fetching: nori-2.6.0.gem (100%)<br>Successfully installed nori-2.6.0<br>Fetching: little-plugger-1.1.3.gem (100%)<br>Successfully installed little-plugger-1.1.3<br>Fetching: logging-1.8.2.gem (100%)<br>Successfully installed logging-1.8.2<br>Fetching: rubyntlm-0.4.0.gem (100%)<br>Successfully installed rubyntlm-0.4.0<br>Fetching: httpclient-2.6.0.1.gem (100%)<br>Successfully installed httpclient-2.6.0.1<br>Fetching: gssapi-1.2.0.gem (100%)<br>Successfully installed gssapi-1.2.0<br>Fetching: winrm-1.3.3.gem (100%)<br>Successfully installed winrm-1.3.3<br>Fetching: winrm-s-0.3.1.gem (100%)<br>Successfully installed winrm-s-0.3.1<br>Fetching: knife-windows-1.0.0.rc.1.gem (100%)<br>Successfully installed knife-windows-1.0.0.rc.1<br>Fetching: knife-vsphere-1.2.3.gem (100%)<br>Successfully installed knife-vsphere-1.2.3<br>Parsing documentation for gssapi-1.2.0<br>Installing ri documentation for gssapi-1.2.0<br>Parsing documentation for gyoku-1.3.1<br>Installing ri documentation for gyoku-1.3.1<br>Parsing documentation for httpclient-2.6.0.1<br>Installing ri documentation for httpclient-2.6.0.1<br>Parsing documentation for knife-vsphere-1.2.3<br>Installing ri documentation for knife-vsphere-1.2.3<br>Parsing documentation for knife-windows-1.0.0.rc.1<br>Installing ri documentation for knife-windows-1.0.0.rc.1<br>Parsing documentation for little-plugger-1.1.3<br>Installing ri documentation for little-plugger-1.1.3<br>Parsing documentation for logging-1.8.2<br>Installing ri documentation for logging-1.8.2<br>Parsing documentation for nokogiri-1.6.6.2<br>Installing ri documentation for nokogiri-1.6.6.2<br>Parsing documentation for nori-2.6.0<br>Installing ri documentation for nori-2.6.0<br>Parsing documentation for rbvmomi-1.8.2<br>Installing ri documentation for rbvmomi-1.8.2<br>Parsing documentation for rubyntlm-0.4.0<br>Installing ri documentation for rubyntlm-0.4.0<br>Parsing documentation for winrm-1.3.3<br>Installing ri documentation for winrm-1.3.3<br>Parsing documentation for winrm-s-0.3.1<br>Installing ri documentation for winrm-s-0.3.1<br>Done installing documentation for gssapi, gyoku, httpclient, knife-vsphere, knife-windows, little-plugger, logging, nokogiri, nori, rbvmomi, rubyntlm, winrm, winrm-s after 13 seconds<br>13 gems installed</p><p> </p><p><em>Stay tuned!</em></p><div class=nav-next-prev><div class=nav-prev><a href=https://vovando.dev/2015/07/15/vmware-horizon-view-auto-connection-utility/><i class="fas fa-chevron-left"></i></a></div><a class=nav-top href=#>top</i></a><div class=nav-next><a href=https://vovando.dev/2015/07/20/install-ruby-1-9-3-or-any-other-version-on-centos/><i class="fas fa-chevron-right"></i></a></div></div></div><footer><div class=footer-content><div class=contact-info><div class=footer-mail><i class="far fa-envelope"></i><a href=mailto:hello@vovando.dev>hello@vovando.dev</a></div><div class=footer-phone><i class="fas fa-phone"></i>7777</div></div><p class="copyright meta">Copyright © 2013–2020, all rights reserved.</p></div></footer></main></body><script src=https://vovando.dev/js/navbutton.js></script></html>