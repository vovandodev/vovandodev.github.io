<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Clouds, Virtualization and something more..."><meta name=Author content="Volodymyr Vrublevskyy"><meta name=keywords content="IT Talks"><link rel=stylesheet href=https://vovando.dev/css/syntax.css><link rel=stylesheet href=https://vovando.dev/css/style.css><script src=https://kit.fontawesome.com/1b7478c139.js crossorigin=anonymous></script><title>IT Talks</title></head><body><aside id=sidenav><header><a href=https://vovando.dev/><img src=https://vovando.dev/avatar.png alt=avatar></a>
<a id=branding href=https://vovando.dev/>IT Talks</a></header><nav><a href=/><i class="fas fa-home fa-sm"></i><span>whoami</span></a>
<a href=/posts><i class="fas fa-keyboard fa-ms"></i><span>blog</span></a>
<a href=/tags><i class="fas fa-tags fa-ms"></i><span>tags</span></a>
<a href=https://github.com/vovandodev target=_blank><i class="fab fa-github fa-ms"></i><span>github</span></a>
<a href=/index.xml><i class="fas fa-rss fa-ms"></i><span>RSS</span></a>
<a href=/contact><i class="far fa-envelope"></i><span>contact</span></a></nav></aside><main id=main><a href=javascript:void(0) id=closebtn onclick=navToggle()><i class="fas fa-bars fa-lg"></i></a><div class=content><h1 id=title>Free SSL certificate for 3 years and up to 100 domains</h1><nav id=TableOfContents><ul><li><ul><li></li></ul></li></ul></nav><h4 id=nbsp> </h4><h4 id=font-size5font-stylefont-weight-boldletrsquos-get-the-certificatefontfont>Let’s get the certificate</h4><p> </p><ol><li>Visit <a href=https://buy.wosign.com/free/>https://buy.wosign.com/free/</a> and register account. Use google translate.</li></ol><p></p><ol start=2><li>Enter the domain(s) that should be included in the SSL certificate in the first textbox, one per line. If you just enter &ldquo;<strong>noteits.net</strong>&rdquo;, you will get the subdomain &ldquo;www.<strong>noteits.net</strong>&rdquo; automatically.</li></ol><p></p><ol start=3><li><p>Leaving the defaults is generally recommended: 3 year period, English language and SHA2 algorithm</p></li><li><p>Verify the domain(s) via either email to a special email account or via a special file you have to upload to <a href=http://noteits.net/>http://noteits.net/</a><strong>noteits.net.html</strong></p></li><li><p>Login to your webserver via SSH and generate a new SSL key and a Certificate Signing Request (CSR), for example with this command:</p></li></ol><p><strong>openssl req -out noteits.net.csr -new -sha256 -newkey rsa:2048 -nodes -keyout noteits.net.key</strong></p><ol start=6><li><p>Select &ldquo;Option 2: Generate by myself&rdquo; to paste the CSR you just generated. You should never use the first Option since that implies that you are not the sole owner of your SSL key</p></li><li><p>Enter your email address and select a new password if you don&rsquo;t have a WoSign account yet.</p></li><li><p>Enter the captcha code, confirm the terms and conditions and Submit the request</p></li><li><p>The next page will confirm the request and show an estimated time of delivery. Keep in mind that the certificates are manually reviewed during Beijing-time business hours so it might take a few hours until you get the certificate</p></li><li><p>Next you will recieve an email with a link to a ZIP file containing your certificate.</p></li></ol><p></p><ol start=11><li>Download it.</li></ol><p></p><p> </p><ol start=12><li>Now we need to set up a Web server (in my case Nginx) to work with the certificate.</li></ol><ul><li>Obtain all the intermediate certificates into ssl directory:</li></ul><p>wget -O – <a href=https://www.startssl.com/certs/ca.pem>https://www.startssl.com/certs/ca.pem</a> | tee -a ca-certs.pem > /dev/null<br>wget -O – <a href=https://www.startssl.com/certs/sub.class1.server.ca.pem>https://www.startssl.com/certs/sub.class1.server.ca.pem</a> | tee -a ca-certs.pem > /dev/null<br>wget -O – <a href=http://aia.startssl.com/certs/ca.crt>http://aia.startssl.com/certs/ca.crt</a> | openssl x509 -inform DER -outform PEM | tee -a ca-certs.pem > /dev/null<br>wget -O – <a href=http://aia1.wosign.com/ca1g2-server1-free.cer>http://aia1.wosign.com/ca1g2-server1-free.cer</a> | openssl x509 -inform DER -outform PEM | tee -a ca-certs.pem > /dev/null<br>wget -O – <a href=http://aia6.wosign.com/ca6.server1.free.cer>http://aia6.wosign.com/ca6.server1.free.cer</a> | openssl x509 -inform DER -outform PEM | tee -a ca-certs.pem > /dev/null</p><p> </p><blockquote><p>​<strong>make sure to configure OCSP stapling</strong> on your webserver since WoSign only operates OCSP responders in China which results in a bad latency for western visitors where the browser queries the OCSP responder before opening the connection. It might as well result in a privacy issue since WoSign a.k.a &ldquo;the Chinese&rdquo; know who visits which website. With OCSP stapling you effectively mitigate both problems.</p></blockquote><p> </p><ul><li>Add conf below to /etc/nginx/nginx.conf</li></ul><ul><li>Add to your domain configuration</li></ul><p>#########################################################</p><p>#</p><p>        ssl on;         ssl_certificate /etc/nginx/ssl/noteits.net_bundle.crt.crt;         ssl_certificate_key /etc/nginx/ssl/noteits.net.key;         ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_ciphers &lsquo;HIGH:!aNULL:!MD5:!kEDH&rsquo;;         add_header Strict-Transport-Security &ldquo;max-age=31536000; includeSubdomains;";</p><p>#</p><p>#########################################################</p><ul><li>Reload Nginx</li></ul><p><strong>service nginx reload</strong></p><p> </p><ol start=13><li>Make sure to test your implementation on the awesome Qualys SSL Labs server test</li></ol><p> </p><p>My result</p><p></p><p> </p><p>or in cli</p><p><strong>openssl s_client -connect noteits.net:443 -tls1  -tlsextdebug  -status</strong></p><p> </p><p><em>I would be happy to answer any questions you have!</em></p><p><em>Stay tuned!</em></p><div class=nav-next-prev><div class=nav-prev><a href=https://vovando.dev/2015/07/22/convert-wildcard-ssl-to-java-keystore-format-jks/><i class="fas fa-chevron-left"></i></a></div><a class=nav-top href=#>top</i></a><div class=nav-next><a href=https://vovando.dev/2015/07/30/cooking-with-chef-how-to-deploy-instance-on-aws-with-knife/><i class="fas fa-chevron-right"></i></a></div></div></div><footer><div class=footer-content><div class=contact-info><div class=footer-mail><i class="far fa-envelope"></i><a href=mailto:hello@vovando.dev>hello@vovando.dev</a></div><div class=footer-phone><i class="fas fa-phone"></i>7777</div></div><p class="copyright meta">Copyright © 2013–2020, all rights reserved.</p></div></footer></main></body><script src=https://vovando.dev/js/navbutton.js></script></html>